(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{64914:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],type:"constructor"},{payable:!1,type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]},54997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(14027)}])},67333:function(e,t,n){"use strict";var a=n(85893),s=n(11163),r=n(214),o=n.n(r),i=n(36485);t.Z=function(e){(0,s.useRouter)();var t=e.getDesign,n=e.getText;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"".concat(o().mainLogo," logoAddParams"),children:(0,a.jsx)("a",{href:(0,i.Rg)("index"),children:(0,a.jsx)("img",{src:t("logoUri","uri",(0,i.Vh)("images/logo.png","mainLogo")),alt:n("Stake NFT - earn ERC20","MainPage_Header")})})})})}},15200:function(e,t,n){"use strict";var a=n(29815),s=n(85893),r=n(44423),o=n(214),i=n.n(o),c=n(11163),u=n(36485),l=[{id:"index",title:"Home",link:"index"}].concat((0,a.Z)((0,u.Sn)("EnabledDemoMind",!0)?[{id:"mint",title:"Mint NFT",link:"mint"}]:[]),[{id:"marketplace",title:"Marketplace",link:"marketplace"},{id:"stake",title:"Stake",link:"stake"},{id:"settings",title:"Settings",link:"settings",adminOnly:!0}]);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,c.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"".concat(i().mainNav," headerNavMenu"),children:l.map((function(n){return n.adminOnly&&!t?null:(0,s.jsx)("a",{className:e===n.id?"".concat(i().active," headerNavActive"):"",href:(0,r.R)(n.link),children:n.title},n.id)}))}),(0,s.jsx)("div",{className:i().mainNavSeperator})]})}},77695:function(e,t,n){"use strict";var a=n(85893),s=n(214),r=n.n(s),o=n(27129),i=n(44423),c=n(73848),u=n(49738);t.Z=function(e){var t=e.tokenId,n=e.tokenUri,s=e.isApproved,l=e.onDeStake,p=e.onStake,d=e.isFetchUri,m=e.deStakeId,f=e.stakeId,y=e.isStaking,h=e.isDeStaking,k=e.isApproveDo,v=e.isApproveId,g=e.isMinted,b=e.farmStatus,x=e.tokenUtx,w=e.openConfirmWindow,S=!1;b&&b.version>=3&&b.lockEnabled&&(0,c.K)()<Number(x)+Number(b.lockTime)&&(S=!0);return(0,a.jsxs)("div",{className:"".concat(r().nftBox," nftTokenBox"),children:[!1!==n&&(0,o.Z)(n)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),(0,a.jsx)("img",{src:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["#",t]}),d&&(0,a.jsx)("h2",{children:"Fetch info"})]}),g?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("a",{className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),href:(0,i.R)("stake"),children:"Go to staking"})}):(0,a.jsxs)(a.Fragment,{children:[null!==l&&(0,a.jsx)(a.Fragment,{children:S?(0,a.jsx)("button",{onClick:function(){var e=Number(x)+Number(b.lockTime)-(0,c.K)();w({title:"NFT token is locked",message:"This token is currently locked. You can withdraw him out of the farm in ".concat((0,u.R)(e)),isOk:!0})},className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),children:"Locked"}):(0,a.jsx)("button",{disabled:h||y||k,className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),onClick:l,children:h&&m===t?(0,a.jsx)(a.Fragment,{children:"De-staking..."}):(0,a.jsx)(a.Fragment,{children:"De-stake"})})}),null!==p&&(0,a.jsx)("button",{className:"".concat(r().mainButton," ").concat(r().spacerBottom," primaryButton"),onClick:p,disabled:h||y||k,children:y&&f===t?(0,a.jsx)(a.Fragment,{children:"Staking..."}):(0,a.jsx)(a.Fragment,{children:k&&v===t?(0,a.jsx)(a.Fragment,{children:"Approving..."}):(0,a.jsx)(a.Fragment,{children:s?"Stake":"Approve & Stake"})})})]})]},t.toString())}},53419:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var a=n(47568),s=n(29815),r=n(34051),o=n.n(r),i=n(44431),c=function(){var e=(0,a.Z)(o().mark((function e(t,n,a,r,c){var u,l,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={from:t,gas:"0"},c&&(l.value=new i.BigNumber(c)),e.next=5,(u=n.methods)[a].apply(u,(0,s.Z)(r)).estimateGas(l);case 5:return p=e.sent,d=new i.BigNumber(new i.BigNumber(p).multipliedBy(1.15).toFixed(0)).toString(16),l.gas="0x"+d,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,s,r){return e.apply(this,arguments)}}()},51024:function(e,t,n){"use strict";n.d(t,{L:function(){return s},O:function(){return a}});var a=function(e){var t=e.multicall,n=e.target,a=e.encoder,s=e.calls;return new Promise((function(e,r){var o={},i=[],c=Object.keys(s).map((function(e){var t=s[e],r=t.func,o=t.args;return i.push(e),{target:n,callData:a.encodeFunctionData(r,o)}}));t.methods.aggregate(c).call().then((function(t){t.returnData.forEach((function(e,t){var n=a.decodeFunctionResult(s[i[t]].func,e)[0];n&&n._isBigNumber&&(n=n.toString()),o[i[t]]=n})),e(o)})).catch((function(e){r(e)}))}))},s=function(e){var t=e.multicall,n=e.calls;return new Promise((function(e,a){var s={},r=n.map((function(e){var t=e.group,n=e.func,a=e.args,r=e.encoder,o=e.target;return s[t]||(s[t]={}),{target:o,callData:r.encodeFunctionData(n,a||[])}}));t.methods.aggregate(r).call().then((function(t){t.returnData.forEach((function(e,t){var a=n[t].encoder.decodeFunctionResult(n[t].func,e)[0];a&&a._isBigNumber&&(a=a.toString()),s[n[t].group][n[t].value||n[t].func]=a})),e(s)})).catch((function(e){a(e)}))}))}},27129:function(e,t){"use strict";t.Z=function(e){return""!==e}},14027:function(e,t,n){"use strict";n.r(t);var a=n(47568),s=n(14924),r=n(26042),o=n(69396),i=n(34051),c=n.n(i),u=n(85893),l=(n(2593),n(35553)),p=n(67294),d=n(214),m=n.n(d),f=n(78967),y=n(53419),h=n(15200),k=n(67333),v=n(77695),g=n(73848),b=n(51024),x=n(64914),w=n.n(x),S=n(26566),T=n(73853),N=n(99312),j=n(64262),F=n(81586),_=new F.vU(S),C=new F.vU(T.Mt),A=function(e){console.log(e)};t.default=function(e){var t=e.storageData,n=e.isOwner,i=e.openConfirmWindow,d=e.addNotify,x=e.getText,F=e.getDesign,R=(0,p.useState)(null===t||void 0===t?void 0:t.chainId),M=R[0],B=R[1],I=(0,p.useState)(null===t||void 0===t?void 0:t.nftCollection),Z=I[0],D=I[1],E=(0,p.useState)(null===t||void 0===t?void 0:t.rewardToken),U=E[0],O=E[1],P=(0,p.useState)(null===t||void 0===t?void 0:t.farmContract),Y=P[0],L=P[1],W=(0,p.useState)(!1),H=W[0],V=W[1],G=(0,p.useState)(!1),J=G[0],X=G[1],K=(0,p.useState)(!1),q=K[0],z=K[1],Q=(0,p.useState)(!1),$=Q[0],ee=Q[1],te=(0,p.useState)(!1),ne=te[0],ae=te[1],se=(0,p.useState)(!1),re=se[0],oe=se[1],ie=(0,p.useState)(!1),ce=ie[0],ue=ie[1],le=(0,p.useState)(!1),pe=le[0],de=le[1],me=(0,p.useState)(!1),fe=me[0],ye=me[1],he=(0,p.useState)(!1),ke=he[0],ve=he[1],ge=(0,p.useState)(!0),be=(ge[0],ge[1]),xe=(0,p.useState)(!1),we=xe[0],Se=xe[1],Te=(0,p.useState)(!1),Ne=Te[0],je=Te[1],Fe=(0,p.useState)(!1),_e=Fe[0],Ce=Fe[1],Ae=(0,p.useState)(!1),Re=Ae[0],Me=Ae[1],Be=(0,p.useState)(!1),Ie=Be[0],Ze=Be[1],De=(0,p.useState)(!0),Ee=(De[0],De[1]),Ue=(0,p.useState)(!1),Oe=(Ue[0],Ue[1]),Pe=(0,p.useState)(!1),Ye=Pe[0],Le=Pe[1],We=(0,p.useState)(!0),He=We[0],Ve=We[1],Ge=(0,p.useState)(!1),Je=Ge[0],Xe=Ge[1],Ke=(0,p.useState)(!1),qe=Ke[0],ze=Ke[1],Qe=(0,p.useState)(!0),$e=(Qe[0],Qe[1]),et=(0,p.useState)(!0),tt=et[0],nt=et[1],at=(0,p.useState)(!1),st=(at[0],at[1]),rt=(0,p.useState)([]),ot=rt[0],it=rt[1],ct=(0,p.useState)([]),ut=ct[0],lt=ct[1],pt=(0,p.useState)({}),dt=pt[0],mt=pt[1],ft=(0,p.useState)(!1),yt=ft[0],ht=ft[1],kt=(0,p.useState)(!1),vt=(kt[0],kt[1]),gt=(0,p.useState)([]),bt=gt[0],xt=gt[1],wt=(0,p.useState)({}),St=wt[0],Tt=wt[1],Nt=(0,p.useState)(!0),jt=Nt[0],Ft=Nt[1],_t=(0,p.useState)(!1),Ct=(_t[0],_t[1],(0,p.useState)(!0)),At=Ct[0],Rt=Ct[1],Mt=(0,p.useState)(!1),Bt=(Mt[0],Mt[1]),It=(0,p.useState)(!1),Zt=(It[0],It[1]),Dt=(0,p.useState)(!1),Et=Dt[0],Ut=Dt[1],Ot=(0,p.useState)(!1),Pt=Ot[0],Yt=Ot[1],Lt=(0,p.useState)(!1),Wt=Lt[0],Ht=Lt[1],Vt=(0,p.useState)(!1),Gt=Vt[0],Jt=Vt[1],Xt=(0,p.useState)(!1),Kt=Xt[0],qt=Xt[1],zt=(0,p.useState)(!1),Qt=zt[0],$t=zt[1],en=(0,p.useState)(!1),tn=en[0],nn=en[1],an=(0,p.useState)(!1),sn=an[0],rn=an[1],on=(0,p.useState)(!1);on[0],on[1];(0,p.useEffect)((function(){t&&t.chainId&&t.nftCollection&&t.rewardToken&&t.farmContract&&(B(t.chainId),D(t.nftCollection),O(t.rewardToken),L(t.farmContract))}),[t]);var cn=function(e,t){var n=!1;try{n=e.message.replace("Internal JSON-RPC error.",""),n=JSON.parse(n)}catch(a){}switch(n&&n.message?n.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}},un=function(){A("do fetchAvailableReward");try{Se(!1),be(!0),$.methods.availableRewards(q).call().then((function(e){ve(e),be(!1)}))}catch(e){console.log(">>> fail fetchAvailableReward"),cn(e),Se(!0)}},ln=function(){A("do fetchTotalRewardBalance"),Ve(!0),Xe(!1),_e&&_e.methods.balanceOf(Y).call().then((function(e){Le(e),Ve(!1)})).catch((function(e){Xe(!0),console.log(">>> fetchTotalRewardBalance",e),cn(e)}))},pn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A("do fetchIsApproved"),$e(!0);try{ne.methods.isApprovedForAll(q,Y).call().then((function(e){ze(e),$e(!1)}))}catch(t){console.log(">>> fail check is approved"),cn(t),$e(!1)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dn=function(e){return A("do fetchTokenUris"),new Promise((function(t,n){if(q&&ne&&re){var a=e.map((function(e){return{target:Z,tokenId:e,callData:_.encodeFunctionData("tokenURI",[e])}}));re.methods.aggregate(a).call().then((function(n){var a={};n.returnData.forEach((function(t,n){var s=_.decodeFunctionResult("tokenURI",t)[0];a[e[n]]=s})),t(a)})).catch((function(e){cn(e),n()}))}else n()}))},mn=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,s,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A("do fetchUserNfts"),!(q&&ne&&re)||tt){e.next=33;break}return Rt(!0),Bt(!1),t=!1,n=!1,a=0,s=0,e.prev=8,e.next=11,ne.methods.totalSupply().call();case 11:a=e.sent,t=!0,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log("Fail fetch total supply");case 18:return e.prev=18,e.next=21,ne.methods.MAX_SUPPLY().call();case 21:s=e.sent,n=!0,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),console.log("Fail fetch max supply");case 28:if(console.log("hasMaxSupply",n),console.log("hasTotalSupply",t),console.log("maxSupply",s),console.log("totalSupply",a),n||t){for(Zt(!0),r=[],o=1;o<=(t?a:s);o++)r.push({target:Z,callData:_.encodeFunctionData("ownerOf",[o])});re.methods.aggregate(r).call().then((function(e){var t=[];e.returnData.forEach((function(e,n){_.decodeFunctionResult("ownerOf",e)[0]===q&&t.push(n+1)})),xt(t),Rt(!1),Ft(!0),dn(t).then((function(e){Tt(e),Ft(!1)})).catch((function(e){Ft(!1)}))})).catch((function(e){console.log(">>> fetchUserNfts",e),Bt(!0),cn(e)}))}case 33:case"end":return e.stop()}}),e,null,[[8,15],[18,25]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){mn(),ce||fe||pe||fn()}),[q,ne,re,$,tt]);var fn=function(){$&&re&&(ye(!1),de(!0),$.methods.version().call().then((function(e){console.log(">>> farmVersion",e);t.farmContract;var n=(0,r.Z)({version:{func:"version",args:[]}},e>=2?{rewardsPerHour:{func:"rewardsPerHour",args:[]}}:{},e>=3?{lockEnabled:{func:"lockEnabled",args:[]},lockTime:{func:"lockTime",args:[]}}:{});(0,b.O)({multicall:re,target:t.farmContract,encoder:C,calls:n}).then((function(e){ue(e),ye(!0),de(!1),console.log(e)})).catch((function(e){de(!1),console.log(">>> err",e)}))})).catch((function(e){de(!1),console.log(">>> fail fetchFarmStatus",e)})))};(0,p.useEffect)((function(){_e&&(A("on useEffect rewardTokenContract"),_e&&(Xe(!1),Oe(!1),Ee(!0),_e.methods.decimals().call().then((function(e){_e.methods.symbol().call().then((function(t){Ee(!1),Ze(e),Me(t),ln()})).catch((function(e){console.log(">>> reward token info - fail fetch symbol"),Xe(!0),Oe(!0)}))})).catch((function(e){console.log(">>> reward token info - fail fetch decimals"),Xe(!0),Oe(!0)}))))}),[_e]),(0,p.useEffect)((function(){fe&&ce&&(A("do fetchStakedNfts"),q&&$&&ce&&(st(!1),vt(!1),nt(!0),$.methods[ce.version>=3?"getStakedTokens_V3":"getStakedTokens"](q).call().then((function(e){var t={},n=e.map((function(e){return t[e.tokenId]=e.stackeUtx,e.tokenId}));lt(t),it(n),nt(!1),ht(!0),dn(n).then((function(e){mt(e),ht(!1)})).catch((function(e){ht(!1),vt(!0)}))})).catch((function(e){st(!0),console.log(">>> fail fetchStakedNfts",e),cn(e)}))))}),[fe]),(0,p.useEffect)((function(){$&&q&&(A("on useEffect farmContract && address"),un())}),[q,$]),(0,p.useEffect)((function(){q&&ne&&(A("on useEffect address && nftContract"),pn())}),[q,ne]);var yn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J||"".concat(H)!="".concat(M)){e.next=4;break}J.eth.getAccounts().then((function(e){z(e[0]);var t=new J.eth.Contract(N,j.Ce[H]);console.log(t),oe(t);var n=new J.eth.Contract(S,Z);ae(n);var a=new J.eth.Contract(w(),U);Ce(a);var s=new J.eth.Contract(T.Mt,Y);ee(s)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),cn(e)})),e.next=8;break;case 4:return e.next=6,(0,f.IC)();case 6:e.sent&&bn();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function hn(){return(hn=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q||!$){e.next=7;break}return je(!0),d("Confirm transaction..."),e.next=5,(0,y.A)(q,$,"claimRewards",[]);case 5:t=e.sent,$.methods.claimRewards().send(t).then((function(e){un(),ln(),je(!1),d("Reward claimed","success")})).catch((function(e){je(!1),console.log(">>> claimRewards",e),cn(e),d("Fail claim reward","error")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(e){return vn.apply(this,arguments)}function vn(){return vn=(0,a.Z)(c().mark((function e(t){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(q&&$&&ne)){e.next=22;break}if(n=function(){var e=(0,a.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Yt(!0),Ht(t),d("Confirm stake transaction"),e.next=6,(0,y.A)(q,$,"stake",[t]);case 6:n=e.sent,$.methods.stake(t).send(n).then((function(){var e=ot;e.push(t),it(e),lt((function(e){return(0,o.Z)((0,r.Z)({},e),(0,s.Z)({},"".concat(t),(0,g.K)()))})),mt((0,o.Z)((0,r.Z)({},dt),(0,s.Z)({},"".concat(t),St[t]))),xt(bt.filter((function(e){return"".concat(e)!=="".concat(t)}))),Tt((0,o.Z)((0,r.Z)({},St),(0,s.Z)({},"".concat(t),!1))),Yt(!1),Ht(!1),d("NFT Staked!","success")})).catch((function(e){d("Stake transaction failed","error"),console.log(">> stakeNft",e),cn(e),Yt(!1),Ht(!1)})),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(0),d("Stake transaction failed","error"),console.log(">> stakeNft calc gas",e.t0),cn(e.t0),Yt(!1),Ht(!1);case 17:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),qe){e.next=21;break}return nn(t),$t(!0),d("Confirm approve transaction"),e.prev=6,e.next=9,(0,y.A)(q,ne,"setApprovalForAll",[Y,!0]);case 9:i=e.sent,ne.methods.setApprovalForAll(Y,!0).send(i).then(function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ze(!0),$t(!1),d("Successfull approved!","success"),n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){d("Fail approve transaction","error"),console.log(">> stakeNft do approve",e),$t(!1),cn(e)})),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(6),d("Fail approve transaction","error"),console.log(">>> stakeNft do approve calc gas",e.t0),$t(!1),cn(e.t0);case 19:e.next=22;break;case 21:n();case 22:case"end":return e.stop()}}),e,null,[[6,13]])}))),vn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q||!$){e.next=18;break}return e.prev=1,Jt(!0),qt(t),d("Confirm withdraw transaction"),e.next=7,(0,y.A)(q,$,"withdraw",[t]);case 7:n=e.sent,$.methods.withdraw(t).send(n).then((function(e){var n=bt;n.push(t),xt(n),lt((function(e){return(0,o.Z)((0,r.Z)({},e),(0,s.Z)({},"".concat(t),0))})),it(ot.filter((function(e){return e!==t}))),Tt((0,o.Z)((0,r.Z)({},St),(0,s.Z)({},"".concat(t),dt[t]))),mt((0,o.Z)((0,r.Z)({},dt),(0,s.Z)({},"".concat(t),!1))),Jt(!1),qt(!1),d("NFT withdrawed","success")})).catch((function(e){console.log(">>> withdraw",e),cn(e),Jt(!1),qt(!1),d("Withdraw NFT transaction failed","error")})),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(">>> withdraw calc gas",e.t0),cn(e.t0),Jt(!1),qt(!1),d("Withdraw NFT transaction failed","error");case 18:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}(0,p.useEffect)((function(){A("on useEffect activeWeb3 initOnWeb3Ready"),M&&Z&&U&&Y&&yn()}),[J,M,Z,U,Y]);var bn=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(">>> connectWithMetamask",M),(0,f.pE)({onBeforeConnect:function(){rn(!0)},onSetActiveChain:V,onConnected:function(e,t){X(t),rn(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),cn(e),rn(!1)},needChainId:M});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xn=("".concat(m().stakeCustomNftHolder),"".concat(m().mainButton," ").concat(m().spacerBottom," primaryButton"),function(e){var t=e.message;e.onReload;return(0,u.jsx)("b",{children:t})});return(0,u.jsxs)("div",{className:m().container,children:[(0,h.Z)("stake",n),(0,k.Z)({getText:x,getDesign:F}),(0,u.jsx)("h1",{className:"".concat(m().h1," pageTitle"),children:x("StakePage_Title","Stake Your NFTs - Earn ERC20")}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),q?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"stakeBeforeYourReward",children:x("StakePage_BeforeYourReward_Text")}),(0,u.jsx)("h2",{className:"stakeYourRewardLabel",children:x("StakePage_YourRewardLabel","Your reward")}),(0,u.jsx)("div",{className:"stakeAfterYourReward",children:x("StakePage_AfterYourReward_Text")}),(0,u.jsxs)("div",{className:m().tokenGrid,children:[(0,u.jsxs)("div",{className:"".concat(m().tokenItem," stakeRewardAndBank"),children:[(0,u.jsx)("h3",{className:m().tokenLabel,children:"Claimable Rewards"}),(0,u.jsx)("p",{className:m().tokenValue,children:we?(0,u.jsx)(u.Fragment,{children:xn({message:"ERROR"})}):(0,u.jsx)("b",{children:ke&&!1!==Ie&&!1!==Re?"".concat(l.bM(ke,Ie)," ").concat(Re):"Loading..."})})]}),(0,u.jsxs)("div",{className:"".concat(m().tokenItem," stakeRewardAndBank"),children:[(0,u.jsx)("h3",{className:m().tokenLabel,children:"Stake Farm balance"}),(0,u.jsx)("p",{className:m().tokenValue,children:Je?(0,u.jsx)(u.Fragment,{children:xn({message:"ERROR"})}):(0,u.jsx)("b",{children:He||!Ye||!1===Ie||!1===Re?"Loading...":"".concat(l.bM(Ye,Ie)," ").concat(Re)})})]})]}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsxs)("b",{className:"stakePageConnectedWallet",children:["Connected wallet ",q]}),(0,u.jsx)("button",{disabled:Ne,className:"".concat(m().mainButton," ").concat(m().spacerTop," primaryButton"),onClick:function(){return function(){return hn.apply(this,arguments)}()},children:Ne?"Receiving an award...":"Claim Rewards"}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsx)("h2",{className:"stakeYourStakedNfts",children:x("StakePage_YourStakedNfts","Your Staked NFTs")}),(0,u.jsx)("div",{className:"stakeYourStakedNftsDesc",children:x("StakePage_YourStakedNfts_Desc")}),(0,u.jsx)("div",{className:m().nftBoxGrid,children:tt?(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"Loading..."})}):(0,u.jsx)(u.Fragment,{children:ot.length>0?(0,u.jsx)(u.Fragment,{children:null===ot||void 0===ot?void 0:ot.map((function(e){return(0,v.Z)({tokenId:e,tokenUri:!!dt[e]&&dt[e],isApproved:qe,onDeStake:function(){return function(e){return gn.apply(this,arguments)}(e)},onStake:null,isFetchUri:yt,deStakeId:Kt,stakeId:Wt,isStaking:Pt,isDeStaking:Gt,isApproveDo:Qt,isApproveId:tn,farmStatus:ce,tokenUtx:!!ut[e]&&ut[e],openConfirmWindow:i})}))}):(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"You dont have staked NFTs."})})})}),(0,u.jsx)("hr",{className:"".concat(m().divider," ").concat(m().spacerTop)}),(0,u.jsx)("h2",{className:"stakeYourUnstakedNfts",children:x("StakePage_YourUnStakedNfts","Your Unstaked NFTs")}),(0,u.jsx)("div",{className:"stakeYourUnstakedNftsDesc",children:x("StakePage_YourUnStakedNfts_Desc")}),(0,u.jsx)("div",{className:m().nftBoxGrid,children:At?(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"Loading..."})}):(0,u.jsx)(u.Fragment,{children:bt.length>0?(0,u.jsx)(u.Fragment,{children:null===bt||void 0===bt?void 0:bt.map((function(e){return(0,v.Z)({tokenId:e,tokenUri:!!St[e]&&St[e],isApproved:qe,onDeStake:null,onStake:function(){return kn(e)},isFetchUri:jt,deStakeId:Kt,stakeId:Wt,isStaking:Pt,isDeStaking:Gt,isApproveDo:Qt,isApproveId:tn})}))}):(0,u.jsx)("p",{className:m().tokenValue,children:(0,u.jsx)("b",{children:"You dont have Unstaked NFTs."})})})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"stakeBeforeConnectWallet",children:x("StakePage_BeforeConnect_Text")}),(0,u.jsx)("button",{disabled:sn,className:"".concat(m().mainButton," primaryButton"),onClick:bn,children:sn?"Connecting":"Connect Wallet"}),(0,u.jsx)("div",{className:"stakeAfterConnectWallet",children:x("StakePage_AfterConnect_Text")})]}),!1]})}},26566:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"string","name":"tokenURI","type":"string"}],"name":"mintNFT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},99312:function(e){"use strict";e.exports=JSON.parse('[{"constant":false,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"blockNumber","type":"uint256"}],"name":"getBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockCoinbase","outputs":[{"name":"coinbase","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockDifficulty","outputs":[{"name":"difficulty","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockGasLimit","outputs":[{"name":"gaslimit","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"name":"timestamp","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getLastBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]')}},function(e){e.O(0,[497,83,774,888,179],(function(){return t=54997,e(e.s=t);var t}));var t=e.O();_N_E=t}]);